<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="survey">
	<insert id="create" >
		insert into survey values(
			survey_seq.nextval, 
			#{game_name}, 
			#{total_eval}, 
			#{environment}, 
			#{thema}, 
			#{composition}, 
			#{difficulty}, 
			#{repeat_num}, 
			#{route},
			#{comments}, 
			sysdate, 
			#{age}, 
			#{gender}, 
			#{member}, 
			#{phone},
			#{name}
		)
	</insert> 
	<select id="list" resultType="com.escape.domain.SurveyVO">
		select * from survey
	</select>
	<select id="customer_survey" resultType="com.escape.domain.SurveyVO">
		select * from survey where phone=#{phone}
	</select>
	<select id="category" resultType="com.escape.domain.SurveyVO">
		select * from survey where game_name=#{game_name}
	</select>
	<select id="read_one" resultType="com.escape.domain.SurveyVO">
		select * from survey where no=#{no}
	</select>
	<select id="avg" resultType="java.util.HashMap">
		select avg(TOTAL_EVAL) as eval, avg(ENVIRONMENT) as env, avg(THEMA) as the, avg(COMPOSITION) as comp, avg(DIFFICULTY) as diff 
		from survey 
		where GAME_NAME=#{game_name}
	</select>
</mapper>